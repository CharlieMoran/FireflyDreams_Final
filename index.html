<!-- /*
 _
//\
V  \
 \  \_
  \,'.`-.
   |\ `. `.       
   ( \  `. `-.                         _,.-:\
    \ \   `.  `-._             __..--' ,-'; /
     \ `.   `-.   `-..___..---'   _.--'  ,'/
      `. `.    `-._        __..--'     ,' /
       `. `-_     ``--..''         _.-' ,'
         `-_ `-.___          __,--'  ,'
             `-.__  `----"""    __.-'
                   `--..____..--'
*/ -->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Firefly Dreams | Official Sanctuary</title>
    <link rel="icon" type="image/png" href="images/FFDF.png">
    
    <link href="https://fonts.googleapis.com/css2?family=Fredoka+One&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
    <style>
        :root {
            --beeYellow: #ffd700;
            --softPink: #ff6b95;
            --magicBlue: #70d6ff;
            --deepNight: #0a0814;
            --glassBg: rgba(15, 12, 30, 0.85);
            --galaxyPurple: #a855f7;
        }

        * { box-sizing: border-box; }

        body {
            margin: 0; padding: 0;
            font-family: 'Poppins', sans-serif;
            color: #fff;
            display: flex; flex-direction: column; align-items: center;
            min-height: 100vh; 
            overflow-y: auto; overflow-x: hidden;
            background-color: var(--deepNight);
            cursor: url('images/wand2.png'), auto;
            -webkit-tap-highlight-color: transparent;
        }

        /* Background System - Layered for Crossfading */
        .bg-layer {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-size: cover; background-position: center;
            filter: brightness(0.3) blur(2px); z-index: -2;
            transition: opacity 2s ease-in-out;
            opacity: 0;
        }
        .bg-active { opacity: 1; }

        /* Bucket & Console Header */
        .header-wrap {
            width: 100%; display: flex; flex-direction: column; align-items: center;
            position: absolute; top: 0; z-index: 1001; padding-top: 15px;
        }

        .bucketHeader { display: flex; justify-content: center; gap: 15px; margin-bottom: 10px; }

        .tinyBucket, .party-icon {
            width: 35px; height: auto; cursor: pointer;
            filter: drop-shadow(0 0 5px rgba(112, 214, 255, 0.4));
            transition: transform 0.2s ease, filter 0.3s;
            background: transparent !important;
        }
        .tinyBucket:hover { transform: scale(1.2) rotate(-10deg); filter: drop-shadow(0 0 8px var(--magicBlue)); }
        
        .party-icon { display: none; }
        .party-icon:hover { animation: rgbGlow 1s infinite linear; }
        @keyframes rgbGlow {
            0% { filter: drop-shadow(0 0 10px red); }
            33% { filter: drop-shadow(0 0 10px green); }
            66% { filter: drop-shadow(0 0 10px blue); }
            100% { filter: drop-shadow(0 0 10px red); }
        }

        /* Minecraft Console Styling */
        .mc-console {
            width: 185px; 
            background: rgba(0, 0, 0, 0.7);
            border: 2px solid #555;
            padding: 3px 6px;
            display: flex; align-items: center;
        }
        .mc-console input {
            background: transparent; border: none; color: #fff;
            width: 100%; outline: none; font-family: 'Poppins', sans-serif; font-size: 0.75rem;
        }
        .console-log {
            position: absolute; top: 90px; color: #ffff55; font-size: 0.75rem;
            text-shadow: 1px 1px #000; pointer-events: none; font-family: 'Fredoka One';
        }

        /* Party Mode FX */
        .disco-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            z-index: 9999; pointer-events: none; display: none;
            animation: discoFlash 0.4s infinite;
        }
        @keyframes discoFlash {
            0% { background: rgba(255, 0, 0, 0.15); }
            20% { background: rgba(0, 255, 0, 0.15); }
            40% { background: rgba(0, 0, 255, 0.15); }
            60% { background: rgba(255, 255, 0, 0.15); }
            80% { background: rgba(255, 0, 255, 0.15); }
            100% { background: rgba(0, 255, 255, 0.15); }
        }

        .dancing { animation: bounceDance 0.5s infinite alternate ease-in-out !important; }
        @keyframes bounceDance { from { transform: translateY(0); } to { transform: translateY(-30px); } }
        
        .gathering {
            position: fixed !important; top: 50% !important; left: 50% !important;
            margin: 0 !important; z-index: 10000 !important;
        }

        /* Character Buttons & Galaxy */
        .charBtnContainer { position: relative; display: flex; justify-content: center; align-items: center; margin-top: 15px; height: 120px; }
        .charBtn { width: 60px; height: auto; cursor: pointer; transition: 0.3s; filter: drop-shadow(0 0 5px var(--softPink)); z-index: 10; }
        .galaxy-fx-wrap { position: absolute; top: 50%; left: 50%; width: 0; height: 0; transform: translate(-50%, -50%); pointer-events: none; z-index: 1; display: flex; justify-content: center; align-items: center; }
        .galaxy-aura { position: absolute; width: 0; height: 0; background: radial-gradient(circle, rgba(168, 85, 247, 0.7) 0%, rgba(88, 28, 135, 0.4) 50%, transparent 70%); border-radius: 50%; opacity: 0; filter: blur(15px); }
        .galaxy-star { position: absolute; background: white; border-radius: 50%; box-shadow: 0 0 8px white, 0 0 12px var(--galaxyPurple); opacity: 0; }
        .galaxy-active .galaxy-aura { animation: auraCycle 5s ease-in-out forwards; }
        .galaxy-active .galaxy-star { animation: nautilusCycle 5s ease-in-out forwards; }
        @keyframes auraCycle { 0% { width: 0; height: 0; opacity: 0; } 30% { width: 380px; height: 380px; opacity: 1; } 70% { width: 380px; height: 380px; opacity: 1; } 100% { width: 0; height: 0; opacity: 0; } }
        @keyframes nautilusCycle { 0% { transform: rotate(0deg) translateX(0) scale(0); opacity: 0; } 50% { transform: rotate(1080deg) translateX(var(--dist)) scale(1.2); opacity: 1; } 100% { transform: rotate(1440deg) translateX(0) scale(0); opacity: 0; } }
        
        .shooting-star-fx { position: fixed; width: 250px; height: 2px; background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.8), white); pointer-events: none; z-index: 2000; animation: streakDiagonal 1.2s linear forwards; }
        @keyframes streakDiagonal { 0% { transform: translate(0, 0) rotate(-45deg); opacity: 0; } 100% { transform: translate(-150vw, 150vh) rotate(-45deg); opacity: 0; } }

        /* Main Content Styling */
        .card, .sectionContent { background: var(--glassBg); backdrop-filter: blur(20px); padding: 3rem; border-radius: 35px; border: 2px solid rgba(255, 215, 0, 0.4); text-align: center; width: 90%; max-width: 650px; margin-bottom: 60px; transition: 0.3s; }
        .card { margin-top: 120px; }
        .heroImg { width: 100%; border-radius: 25px; border: 4px solid var(--beeYellow); margin-bottom: 2rem; animation: rectangularBreathingGlow 4s infinite ease-in-out; }
        .profileImg { height: 400px; width: auto; max-width: 100%; display: block; margin: 0 auto 1.5rem auto; object-fit: contain; animation: imageOutlineGlowYellow 4s infinite ease-in-out; }
        #particles { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; pointer-events: none; }
        .particle { position: absolute; width: 6px; height: 6px; background: var(--beeYellow); border-radius: 50%; animation: floatDown 10s infinite linear; opacity: 0; }
        @keyframes floatDown { 0% { transform: translateY(-10vh) translateX(0); opacity: 0; } 10% { opacity: 0.7; } 90% { opacity: 0.7; } 100% { transform: translateY(110vh) translateX(50px); opacity: 0; } }
        #splashOverlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(10, 8, 20, 0.95); backdrop-filter: blur(15px); display: flex; justify-content: center; align-items: center; z-index: 10000; transition: opacity 0.8s ease; }
        .splashBox { background: var(--glassBg); padding: 2.5rem; border-radius: 35px; border: 2px solid var(--beeYellow); text-align: center; max-width: 500px; width: 90%; box-shadow: 0 0 50px rgba(0,0,0,0.8); }
        .splashBtns { display: flex; gap: 15px; justify-content: center; margin-top: 2rem; }
    </style>
</head>
<body>

    <div class="header-wrap">
        <div class="bucketHeader">
            <img src="images/wb.png" id="bucket-water" alt="Water Bucket" class="tinyBucket" onclick="bucketAction('water')">
            <img src="images/sb.png" id="bucket-snow" alt="Snow Bucket" class="tinyBucket" onclick="bucketAction('snow')">
            <img src="images/mb.png" id="bucket-milk" alt="Milk Bucket" class="tinyBucket" onclick="bucketAction('milk')">
            <img src="images/banana.png" id="banana-party" alt="Party Time" class="party-icon" onclick="startParty()">
        </div>
        <div class="mc-console">
            <input type="text" id="consoleInput" placeholder="Type command..." onkeydown="handleConsole(event)">
        </div>
        <div id="consoleLog" class="console-log"></div>
    </div>

    <div id="discoOverlay" class="disco-overlay"></div>

    <div id="bg-layers">
        <div id="bg1" class="bg-layer bg-active"></div>
        <div id="bg2" class="bg-layer"></div>
    </div>

    <div id="splashOverlay">
        <div class="splashBox">
            <h2 style="font-family: 'Fredoka One'; color: var(--beeYellow);">Are you ready to explore with us Pookie?</h2>
            <div class="splashBtns">
                <button class="enterBtn yesBtn" style="font-family: 'Fredoka One'; padding: 15px 35px; border-radius: 20px; background: var(--beeYellow); color: var(--deepNight); cursor: pointer;" onclick="bananaEnter(event)">YES</button>
                <button class="enterBtn noBtn" style="font-family: 'Fredoka One'; padding: 15px 35px; border-radius: 20px; background: var(--softPink); color: white; cursor: pointer;" onclick="bananaExit()">NO</button>
            </div>
        </div>
    </div>

    <audio id="bgMusic" loop><source src="audio/bgmusic.mp3" type="audio/mpeg"></audio>
    <audio id="rainAudio" loop><source src="audio/Rain.mp3" type="audio/mpeg"></audio>
    <audio id="partyMusic"><source src="audio/PT.mp3" type="audio/mpeg"></audio>

    <div id="particles"></div>

    <div class="card">
        <img src="images/hero.png" id="heroPoster" alt="Hero Poster" class="heroImg">
        <h1 id="titleText">Firefly Dreams</h1>
        <p>A whimsical survival community for girls.</p>
        <div style="font-family: 'Fredoka One'; color: var(--beeYellow);">IP: FIREFLYDREAMS.WORLD</div>
    </div>

    <div class="sectionContent">
        <div class="loreGrid">
            <div class="profileCard" id="card-bunny">
                <img src="images/Willow.png" alt="BunnyWifRabies" class="profileImg">
                <h3>Bunnywifrabies</h3>
            </div>
            <div class="profileCard" id="card-moondrop">
                <img src="images/MD.png" alt="Moondrop" class="profileImg pink-outline">
                <h3 style="color: var(--softPink);">Moondrop</h3>
                <div class="charBtnContainer">
                    <img src="images/MDC.png" id="moonBtn" alt="Moon" class="charBtn" onclick="charAction('moon', event)">
                </div>
            </div>
            <div class="profileCard" id="card-stardrop">
                <img src="images/SD.png" alt="Stardrop" class="profileImg">
                <h3>Stardrop</h3>
                <div class="charBtnContainer">
                    <div id="dreamGalaxy" class="galaxy-fx-wrap"><div class="galaxy-aura"></div></div>
                    <img src="images/SDDC.png" id="dreamBtn" alt="Dreamcatcher" class="charBtn" onclick="charAction('dream', event)">
                </div>
            </div>
        </div>
    </div>

    <script>
        // --- Corrected Cheat Sheet Mapping ---
        const themes = {
            day: { hero: 'images/hero.png', bg: ['bg dt.png', 'bg dt2.png'] },
            sunset: { hero: 'images/hero sunset.jpg', bg: ['bg ss.png', 'bg ss2.png'] },
            night: { hero: 'images/hero night.jpg', bg: ['bg nt.png', 'bg nt2.png'] }
        };

        let currentTheme = 'day';
        let bgCycleIdx = 0;

        function getNYCHour() {
            return new Date(new Date().toLocaleString("en-US", {timeZone: "America/New_York"})).getHours();
        }

        function applyTheme(theme) {
            currentTheme = theme;
            document.getElementById('heroPoster').src = themes[theme].hero;
            cycleBackground();
        }

        function cycleBackground() {
            const bg1 = document.getElementById('bg1');
            const bg2 = document.getElementById('bg2');
            const nextImg = themes[currentTheme].bg[bgCycleIdx];
            
            if (bg1.classList.contains('bg-active')) {
                bg2.style.backgroundImage = `url('images/${nextImg}')`;
                bg2.classList.add('bg-active');
                bg1.classList.remove('bg-active');
            } else {
                bg1.style.backgroundImage = `url('images/${nextImg}')`;
                bg1.classList.add('bg-active');
                bg2.classList.remove('bg-active');
            }
            bgCycleIdx = (bgCycleIdx + 1) % 2;
        }

        function checkTime() {
            const hour = getNYCHour();
            let newTheme = 'night';
            if (hour >= 6 && hour < 17) newTheme = 'day';
            else if (hour >= 17 && hour < 20) newTheme = 'sunset';
            
            if (newTheme !== currentTheme) applyTheme(newTheme);
        }

        // Minecraft Command Console
        function handleConsole(e) {
            if (e.key === 'Enter') {
                const val = e.target.value.trim().toLowerCase();
                const log = document.getElementById('consoleLog');
                e.target.value = '';
                if (val === '/time set day') { applyTheme('day'); log.innerText = 'Time set to Day!'; }
                else if (val === '/time set noon') { applyTheme('sunset'); log.innerText = 'Time set to Noon!'; }
                else if (val === '/time set night') { applyTheme('night'); log.innerText = 'Time set to Night!'; }
                else if (val === '/partytime') { document.getElementById('banana-party').style.display = 'block'; log.innerText = 'Party mode enabled!'; }
                setTimeout(() => log.innerText = '', 3000);
            }
        }

        // Party Time Logic
        function startParty() {
            const bgm = document.getElementById('bgMusic');
            const ptm = document.getElementById('partyMusic');
            const disco = document.getElementById('discoOverlay');
            bgm.pause();
            ptm.volume = 0.15;
            ptm.play();
            disco.style.display = 'block';
            document.body.style.overflow = 'hidden';
            
            const dancers = [
                document.getElementById('bucket-water'), document.getElementById('bucket-snow'), document.getElementById('bucket-milk'),
                document.getElementById('moonBtn'), document.getElementById('dreamBtn'), document.getElementById('banana-party')
            ];
            dancers.forEach((d, i) => {
                d.classList.add('gathering', 'dancing');
                d.style.marginLeft = `${(i - 2.5) * 60}px`;
            });

            ptm.onended = () => {
                disco.style.display = 'none';
                document.body.style.overflow = 'auto';
                document.getElementById('banana-party').style.display = 'none';
                dancers.forEach(d => d.classList.remove('gathering', 'dancing'));
                bgm.play();
            };
        }

        // --- Core Magic ---
        const particleContainer = document.getElementById('particles');
        for (let i = 0; i < 150; i++) {
            const p = document.createElement('div');
            p.className = 'particle';
            p.style.left = Math.random() * 100 + 'vw';
            p.style.animationDelay = Math.random() * 8 + 's';
            p.style.animationDuration = (Math.random() * 3 + 2) + 's'; 
            particleContainer.appendChild(p);
        }

        function bucketAction(type) {
            const rain = document.getElementById('rainAudio');
            const pts = document.querySelectorAll('.particle');
            if (type === 'water') {
                pts.forEach(p => { p.style.background = '#70d6ff'; p.style.width = '2px'; p.style.height = '15px'; p.style.animationDuration = '1s'; });
                rain.volume = 0.1; rain.play();
            } else if (type === 'snow') {
                pts.forEach(p => { p.style.background = '#fff'; p.style.width = '6px'; p.style.height = '6px'; p.style.animationDuration = '5s'; });
                rain.pause();
            } else {
                pts.forEach(p => { p.style.background = '#ffd700'; p.style.width = '6px'; p.style.height = '6px'; p.style.animationDuration = '10s'; });
                rain.pause();
            }
        }

        function charAction(type) {
            if (type === 'moon') createShootingStars();
            else {
                const g = document.getElementById('dreamGalaxy');
                g.classList.add('galaxy-active');
                setTimeout(() => g.classList.remove('galaxy-active'), 5000);
            }
        }

        function createShootingStars() {
            for (let i = 0; i < 20; i++) {
                setTimeout(() => {
                    const s = document.createElement('div');
                    s.className = 'shooting-star-fx';
                    s.style.top = (Math.random() * 60 - 20) + 'vh';
                    s.style.right = '-250px';
                    document.body.appendChild(s);
                    setTimeout(() => s.remove(), 1200);
                }, i * 120);
            }
        }

        // Galaxy Setup
        const gWrap = document.getElementById('dreamGalaxy');
        for (let i = 0; i < 45; i++) {
            const s = document.createElement('div');
            s.className = 'galaxy-star';
            s.style.width = (Math.random() * 5 + 2) + 'px';
            s.style.height = s.style.width;
            s.style.setProperty('--dist', (i * 3.5 + 25) + 'px');
            s.style.animationDelay = (i * 0.04) + 's';
            gWrap.appendChild(s);
        }

        function bananaEnter() { document.getElementById('bgMusic').volume = 0.2; document.getElementById('bgMusic').play(); document.getElementById('splashOverlay').style.opacity = '0'; setTimeout(() => document.getElementById('splashOverlay').style.display = 'none', 800); }
        function bananaExit() { window.location.href = "https://www.google.com"; }

        // Initial Setup
        checkTime();
        setInterval(checkTime, 60000);
        setInterval(cycleBackground, 15000);
    </script>
</body>
</html>

<!-- /*
 _
//\
V  \
 \  \_
  \,'.`-.
   |\ `. `.       
   ( \  `. `-.                         _,.-:\
    \ \   `.  `-._             __..--' ,-'; /
     \ `.   `-.   `-..___..---'   _.--'  ,'/
      `. `.    `-._        __..--'     ,' /
       `. `-_     ``--..''         _.-' ,'
         `-_ `-.___          __,--'  ,'
             `-.__  `----"""    __.-'
                   `--..____..--'
*/ -->