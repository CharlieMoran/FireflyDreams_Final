<!-- /*
 _
//\
V  \
 \  \_
  \,'.`-.
   |\ `. `.       
   ( \  `. `-.                         _,.-:\
    \ \   `.  `-._             __..--' ,-'; /
     \ `.   `-.   `-..___..---'   _.--'  ,'/
      `. `.    `-._        __..--'     ,' /
       `. `-_     ``--..''         _.-' ,'
         `-_ `-.___          __,--'  ,'
             `-.__  `----"""    __.-'
                   `--..____..--'
*/ -->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Firefly Dreams | Official Sanctuary</title>
    <link rel="icon" type="image/png" href="images/FFDF.png">
    
    <link href="https://fonts.googleapis.com/css2?family=Fredoka+One&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
    <style>
        :root {
            --beeYellow: #ffd700;
            --softPink: #ff6b95;
            --magicBlue: #70d6ff;
            --deepNight: #0a0814;
            --glassBg: rgba(15, 12, 30, 0.85);
            --galaxyPurple: #a855f7;
        }

        /* Global Resets 
        */
        * { 
            box-sizing: border-box; 
        }

        body {
            margin: 0; 
            padding: 0;
            font-family: 'Poppins', sans-serif;
            color: #fff;
            display: flex; 
            flex-direction: column; 
            align-items: center;
            min-height: 100vh; 
            overflow-y: auto; 
            overflow-x: hidden;
            background-color: var(--deepNight);
            cursor: url('images/wand2.png'), auto;
            -webkit-tap-highlight-color: transparent;
        }

        /* Custom Wand Cursors 
        */
        a, 
        button, 
        .whitelistBox, 
        .profileCard, 
        .yesBtn, 
        .noBtn, 
        .party-img, 
        .party-large, 
        .emotionImg {
            cursor: url('images/wand1.png'), pointer !important;
        }

        /* Background Management System 
        */
        .bg-container { 
            position: fixed; 
            top: 0; 
            left: 0; 
            width: 100%; 
            height: 100%; 
            z-index: -2; 
        }

        .bg-layer {
            position: absolute; 
            top: 0; 
            left: 0; 
            width: 100%; 
            height: 100%;
            background-size: cover; 
            background-position: center;
            filter: brightness(0.3) blur(2px);
            transition: opacity 2s ease-in-out;
            opacity: 0;
        }

        .bg-active { 
            opacity: 1; 
        }

        /* UI Header & Console Layout 
        */
        .header-wrap {
            width: 100%; 
            display: flex; 
            flex-direction: column; 
            align-items: center;
            position: absolute; 
            top: 0; 
            z-index: 1001; 
            padding-top: 15px;
        }

        .bucketHeader { 
            display: flex; 
            justify-content: center; 
            gap: 15px; 
            margin-bottom: 10px; 
            align-items: center; 
        }

        .party-img {
            width: 35px; 
            height: auto;
            filter: drop-shadow(0 0 5px rgba(112, 214, 255, 0.4));
            transition: all 0.8s ease-in-out !important;
            background: transparent !important;
            z-index: 10;
        }

        .party-banana { 
            display: none; 
            width: 40px; 
        }

        .party-large { 
            width: 60px; 
            filter: drop-shadow(0 0 5px var(--softPink)); 
            z-index: 10; 
        }

        .mc-console {
            width: 185px; 
            background: rgba(0, 0, 0, 0.7);
            border: 2px solid #555; 
            padding: 3px 6px;
            display: flex; 
            align-items: center;
        }

        .mc-console input {
            background: transparent; 
            border: none; 
            color: #fff;
            width: 100%; 
            outline: none; 
            font-family: 'Poppins', sans-serif; 
            font-size: 0.75rem;
        }

        .console-log {
            position: absolute; 
            top: 90px; 
            color: #ffff55; 
            font-size: 0.75rem;
            text-shadow: 1px 1px #000; 
            pointer-events: none; 
            font-family: 'Fredoka One';
        }

        /* Party Animation State Styles 
        */
        .disco-overlay {
            position: fixed; 
            top: 0; 
            left: 0; 
            width: 100%; 
            height: 100%;
            z-index: 9998; 
            pointer-events: none; 
            display: none;
            animation: discoFlash 0.4s infinite;
        }

        @keyframes discoFlash {
            0% { background: rgba(255, 0, 0, 0.1); }
            33% { background: rgba(0, 255, 0, 0.1); }
            66% { background: rgba(0, 0, 255, 0.1); }
        }

        .gathering {
            position: fixed !important; 
            top: 50% !important; 
            left: 50% !important;
            margin: -30px 0 0 -30px !important;
            z-index: 10001 !important;
            pointer-events: none !important;
            transform: translate(var(--circle-x), var(--circle-y)) !important;
        }

        .dancing { 
            animation: bounceCircle 0.6s infinite alternate ease-in-out !important; 
        }

        @keyframes bounceCircle {
            from { transform: translate(var(--circle-x), var(--circle-y)) translateY(0); }
            to { transform: translate(var(--circle-x), var(--circle-y)) translateY(-60px); }
        }

        /* Main Page Content Styles 
        */
        .card, 
        .sectionContent {
            background: var(--glassBg); 
            backdrop-filter: blur(20px); 
            -webkit-backdrop-filter: blur(20px);
            padding: 3rem; 
            border-radius: 35px; 
            border: 2px solid rgba(255, 215, 0, 0.4);
            text-align: center; 
            width: 90%; 
            max-width: 650px; 
            margin-bottom: 60px;
            box-shadow: 0 0 60px rgba(0,0,0,0.7); 
            transition: transform 0.3s ease;
        }

        .card { 
            margin-top: 130px; 
        }

        .card:hover, 
        .sectionContent:hover { 
            transform: translateY(-5px); 
            border-color: var(--beeYellow); 
        }

        .heroImg { 
            width: 100%; 
            border-radius: 25px; 
            border: 4px solid var(--beeYellow); 
            margin-bottom: 2rem; 
            animation: rectangularBreathingGlow 4s infinite ease-in-out; 
        }

        h1 { 
            font-family: 'Fredoka One', cursive; 
            color: var(--beeYellow); 
            font-size: 3.5rem; 
            text-shadow: 2px 2px 0px #000; 
            margin: 0; 
        }

        h2, 
        h3 { 
            font-family: 'Fredoka One', cursive; 
            color: var(--beeYellow); 
            margin: 0 0 1rem 0; 
        }

        /* Profile Card 3D Perspectives 
        */
        .loreGrid { 
            display: grid; 
            grid-template-columns: 1fr; 
            gap: 30px; 
            margin-top: 2rem; 
            text-align: left; 
        }

        .profileCard {
            background: rgba(255, 255, 255, 0.05); 
            border-radius: 25px; 
            padding: 2rem;
            position: relative; 
            overflow: hidden; 
            transition: transform 0.5s cubic-bezier(0.23, 1, 0.32, 1);
            transform-style: preserve-3d; 
            perspective: 1000px; 
            border: 1px solid rgba(255,255,255,0.1);
        }

        .profileCard:hover {
            transform: rotateY(10deg) rotateX(5deg) scale(1.02);
            box-shadow: -10px 10px 30px rgba(0,0,0,0.5), 0 0 20px rgba(255, 107, 149, 0.2);
        }

        .profileHeader { 
            display: flex; 
            align-items: center; 
            justify-content: space-between; 
            margin-bottom: 1rem; 
        }

        .ageBadge { 
            background: var(--softPink); 
            color: white; 
            padding: 5px 12px; 
            border-radius: 15px; 
            font-size: 0.8rem; 
            font-weight: bold; 
        }

        .countdown { 
            font-size: 0.85rem; 
            color: var(--softPink); 
            margin-bottom: 15px; 
            font-style: italic; 
            display: block; 
            text-align: center;
        }

        .profileImg { 
            height: 400px; 
            width: auto; 
            max-width: 100%; 
            display: block; 
            margin: 0 auto 1.5rem auto; 
            object-fit: contain; 
            transform: translateZ(50px); 
            animation: imageOutlineGlowYellow 4s infinite ease-in-out; 
        }

        .profileImg.pink-outline { 
            animation: imageOutlineGlowPink 4s infinite ease-in-out; 
        }

        /* Emotion Hover Effects 
        */
        .emotionRow { 
            display: flex; 
            justify-content: space-around; 
            align-items: flex-end; 
            margin-top: 2rem; 
            gap: 10px; 
        }

        .emotionBox { 
            flex: 1; 
            text-align: center; 
        }

        .emotionImg { 
            width: 100%; 
            max-width: 120px; 
            filter: drop-shadow(0 0 10px var(--softPink)); 
            transition: all 0.8s ease-in-out; 
            animation: breathingGlowPink 5s infinite ease-in-out; 
        }

        .emotionImg:hover { 
            transform: scale(1.1) rotate(3deg); 
            filter: drop-shadow(0 0 20px var(--softPink)) brightness(1.1); 
        }

        /* Magic Mirror Styling 
        */
        .magicMirrorBox { 
            border: 2px solid var(--softPink); 
            box-shadow: 0 0 30px rgba(255, 107, 149, 0.2); 
            text-align: left; 
        }

        #chatFeed { 
            height: 350px; 
            overflow-y: auto; 
            margin-top: 20px; 
            padding: 20px; 
            background: rgba(0, 0, 0, 0.4); 
            border-radius: 20px; 
            border: 1px solid rgba(255, 107, 149, 0.3); 
            display: flex; 
            flex-direction: column; 
            gap: 15px; 
        }

        .mirrorMsg { 
            display: flex; 
            align-items: center; 
            gap: 15px; 
            animation: slideIn 0.4s ease-out forwards; 
        }

        .mirrorAvatar { 
            width: 45px; 
            height: 45px; 
            border-radius: 50%; 
            border: 2px solid var(--beeYellow); 
        }

        .mirrorText b { 
            color: var(--softPink); 
            font-family: 'Fredoka One'; 
        }

        /* Visual FX Systems 
        */
        .galaxy-fx-wrap { 
            position: absolute; 
            top: 50%; 
            left: 50%; 
            width: 0; 
            height: 0; 
            transform: translate(-50%, -50%); 
            pointer-events: none; 
            z-index: 1; 
            display: flex; 
            justify-content: center; 
            align-items: center; 
        }

        .galaxy-aura { 
            position: absolute; 
            width: 0; 
            height: 0; 
            background: radial-gradient(circle, rgba(168, 85, 247, 0.7) 0%, rgba(88, 28, 135, 0.4) 50%, transparent 70%); 
            border-radius: 50%; 
            opacity: 0; 
            filter: blur(15px); 
        }

        .galaxy-star { 
            position: absolute; 
            background: white; 
            border-radius: 50%; 
            box-shadow: 0 0 8px white, 0 0 12px var(--galaxyPurple); 
            opacity: 0; 
        }

        .galaxy-active .galaxy-aura { 
            animation: auraCycle 5s ease-in-out forwards; 
        }

        .galaxy-active .galaxy-star { 
            animation: nautilusCycle 5s ease-in-out forwards; 
        }

        @keyframes auraCycle { 
            0% { width: 0; height: 0; opacity: 0; } 
            30% { width: 380px; height: 380px; opacity: 1; } 
            70% { width: 380px; height: 380px; opacity: 1; } 
            100% { width: 0; height: 0; opacity: 0; } 
        }

        @keyframes nautilusCycle { 
            0% { transform: rotate(0deg) translateX(0) scale(0); opacity: 0; } 
            50% { transform: rotate(1080deg) translateX(var(--dist)) scale(1.2); opacity: 1; } 
            100% { transform: rotate(1440deg) translateX(0) scale(0); opacity: 0; } 
        }

        .shooting-star-fx { 
            position: fixed; 
            width: 250px; 
            height: 2px; 
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.8), white); 
            pointer-events: none; 
            z-index: 2000; 
            animation: streakDiagonal 1.2s linear forwards; 
        }

        @keyframes streakDiagonal { 
            0% { transform: translate(0, 0) rotate(-45deg); opacity: 0; } 
            10% { opacity: 1; } 
            100% { transform: translate(-150vw, 150vh) rotate(-45deg); opacity: 0; } 
        }

        #particles { 
            position: fixed; 
            top: 0; 
            left: 0; 
            width: 100%; 
            height: 100%; 
            z-index: -1; 
            pointer-events: none; 
        }

        .particle { 
            position: absolute; 
            width: 6px; 
            height: 6px; 
            background: var(--beeYellow); 
            border-radius: 50%; 
            box-shadow: 0 0 15px var(--beeYellow); 
            animation: floatUp 15s infinite linear; 
            opacity: 0.7; 
        }

        @keyframes floatUp { 
            0% { transform: translateY(-10vh) translateX(0); opacity: 0; } 
            20% { opacity: 1; } 
            100% { transform: translateY(110vh) translateX(100px); opacity: 0; } 
        }

        .trailStar { 
            position: absolute; 
            width: 8px; 
            height: 8px; 
            border-radius: 50%; 
            pointer-events: none; 
            z-index: 100; 
            animation: starFade 1s linear forwards; 
        }

        .burstStar { 
            position: absolute; 
            width: 8px; 
            height: 8px; 
            background: var(--beeYellow); 
            border-radius: 50%; 
            box-shadow: 0 0 10px var(--beeYellow); 
            pointer-events: none; 
            z-index: 1000; 
            animation: burstFade 0.8s ease-out forwards; 
        }

        @keyframes starFade { 
            0% { opacity: 1; transform: scale(1); } 
            100% { opacity: 0; transform: scale(0.3) translateY(20px); } 
        }

        @keyframes burstFade { 
            0% { opacity: 1; transform: scale(1) translate(0, 0); } 
            100% { opacity: 0; transform: scale(0) translate(var(--x), var(--y)); } 
        }

        /* Splash & Global Indicator UI 
        */
        #splashOverlay { 
            position: fixed; 
            top: 0; 
            left: 0; 
            width: 100%; 
            height: 100%; 
            background: rgba(10, 8, 20, 0.95); 
            backdrop-filter: blur(15px); 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            z-index: 10000; 
            transition: opacity 0.8s ease; 
        }

        .splashBox { 
            background: var(--glassBg); 
            padding: 2.5rem; 
            border-radius: 35px; 
            border: 2px solid var(--beeYellow); 
            text-align: center; 
            max-width: 500px; 
            width: 90%; 
            box-shadow: 0 0 50px rgba(0,0,0,0.8); 
        }

        #moonPhaseContainer { 
            position: fixed; 
            top: 20px; 
            left: 20px; 
            z-index: 999; 
            background: rgba(255, 255, 255, 0.1); 
            backdrop-filter: blur(10px); 
            padding: 10px 15px; 
            border-radius: 50px; 
            border: 1px solid rgba(255, 215, 0, 0.3); 
            display: flex; 
            align-items: center; 
            gap: 10px; 
            color: var(--beeYellow); 
            font-family: 'Fredoka One'; 
            box-shadow: 0 0 15px rgba(0,0,0,0.5); 
            pointer-events: none; 
        }

        .whitelistBox { 
            background: rgba(255, 107, 149, 0.1); 
            border: 2px dashed var(--softPink); 
            padding: 2.5rem; 
            border-radius: 25px; 
            transition: 0.3s; 
            position: relative; 
            overflow: hidden; 
        }

        .discordHandle { 
            display: block; 
            margin-top: 10px; 
            font-family: 'Fredoka One'; 
            color: var(--softPink); 
            font-size: 1.8rem; 
        }

        /* Ability Containers 
        */
        .charBtnContainer { 
            position: relative; 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            margin: 15px auto; 
            width: 100%; 
            height: 120px; 
        }

        /* Keyframe Shared Animations 
        */
        @keyframes rectangularBreathingGlow { 0%, 100% { box-shadow: 0 0 15px rgba(255, 215, 0, 0.3); border-color: rgba(255, 215, 0, 0.5); } 50% { box-shadow: 0 0 35px rgba(255, 215, 0, 0.7); border-color: var(--beeYellow); } }
        @keyframes imageOutlineGlowYellow { 0%, 100% { filter: drop-shadow(0 0 3px rgba(255, 215, 0, 0.8)); } 50% { filter: drop-shadow(0 0 10px var(--beeYellow)) brightness(1.1); } }
        @keyframes imageOutlineGlowPink { 0%, 100% { filter: drop-shadow(0 0 3px rgba(255, 107, 149, 0.8)); } 50% { filter: drop-shadow(0 0 10px var(--softPink)) brightness(1.1); } }
        @keyframes breathingGlowPink { 0%, 100% { filter: drop-shadow(0 0 5px var(--softPink)); } 50% { filter: drop-shadow(0 0 20px var(--softPink)); } }
        @keyframes slideIn { from { opacity: 0; transform: translateX(-15px); } to { opacity: 1; transform: translateX(0); } }

        footer { 
            margin: 40px 0; 
            font-size: 0.75rem; 
            color: rgba(255,255,255,0.4); 
            text-align: center; 
        }

        @media (max-width: 600px) { 
            h1 { font-size: 2.2rem; } 
            .card, .sectionContent { padding: 1.5rem; width: 90%; } 
            .profileImg { height: 280px; } 
            .emotionImg { max-width: 75px; } 
        }
    </style>
</head>
<body>

    <div id="moonPhaseContainer">
        <span id="moonIcon">ðŸŒ‘</span>
        <span id="moonLabel">Calculating...</span>
    </div>

    <div class="header-wrap">
        <div class="bucketHeader">
            <img src="images/wb.png" id="p-wb" alt="Water" class="party-img" onclick="bucketAction('water')">
            <img src="images/sb.png" id="p-sb" alt="Snow" class="party-img" onclick="bucketAction('snow')">
            <img src="images/mb.png" id="p-mb" alt="Milk" class="party-img" onclick="bucketAction('milk')">
            <img src="images/banana.png" id="p-banana" alt="Party" class="party-img party-banana" onclick="startParty()">
        </div>
        <div class="mc-console">
            <input type="text" id="consoleInput" placeholder="Type command..." onkeydown="handleConsole(event)">
        </div>
        <div id="consoleLog" class="console-log"></div>
    </div>

    <div id="discoOverlay" class="disco-overlay"></div>
    <div id="splashOverlay">
        <div class="splashBox">
            <h2 style="font-family: 'Fredoka One'; color: var(--beeYellow);">Are you ready to explore with us Pookie?</h2>
            <div style="display:flex; justify-content:center; gap:15px; margin-top:2rem;">
                <button class="yesBtn" style="font-family: 'Fredoka One'; padding: 15px 35px; border-radius: 20px; background: var(--beeYellow); color: var(--deepNight); border: none;" onclick="bananaEnter(event)">YES</button>
                <button class="noBtn" style="font-family: 'Fredoka One'; padding: 15px 35px; border-radius: 20px; background: var(--softPink); color: white; border: none;" onclick="bananaExit()">NO</button>
            </div>
        </div>
    </div>

    <div class="bg-container">
        <div id="bg1" class="bg-layer bg-active"></div>
        <div id="bg2" class="bg-layer"></div>
    </div>

    <audio id="bgMusic" loop><source src="audio/bgmusic.mp3" type="audio/mpeg"></audio>
    <audio id="rainAudio" loop><source src="audio/Rain.mp3" type="audio/mpeg"></audio>
    <audio id="partyMusic"><source src="audio/PT.mp3" type="audio/mpeg"></audio>

    <div id="particles"></div>

    <div class="card">
        <img src="images/hero.png" id="heroPoster" alt="Hero" class="heroImg">
        <h1>Firefly Dreams</h1>
        <p>A whimsical survival community for girls.</p>
        <div style="font-family: 'Fredoka One'; color: var(--beeYellow);">IP: mc.fireflydreams.world</div>
    </div>

    <div class="sectionContent">
        <h2>About Our Sanctuary</h2>
        <p>Moondrop the Moon Witch wove magical ley lines across the digital realm to create a sanctuary for the girls of Firefly Dreams. We share adventures and moonlit magic across any distance.</p>
        <p style="font-weight: 600; color: var(--beeYellow);">We are an 18 plus cozy female friendly server where we are free to build create and explore to our hearts content.</p>
        <div class="emotionRow">
            <div class="emotionBox">
                <img src="images/IMG_6921-removebg-preview.png" id="laughing" alt="Laughing" class="emotionImg"> 
                <span style="display:block; color:var(--softPink); font-family:'Fredoka One'; margin-top: 10px; font-size: 0.8rem;">Laughing</span>
            </div>
            <div class="emotionBox">
                <img src="images/IMG_6894-removebg-preview.png" id="crying" alt="Crying" class="emotionImg"> 
                <span style="display:block; color:var(--softPink); font-family:'Fredoka One'; margin-top: 10px; font-size: 0.8rem;">Crying</span>
            </div>
            <div class="emotionBox">
                <img src="images/IMG_6937-removebg-preview.png" id="tea" alt="Spilling Tea" class="emotionImg"> 
                <span style="display:block; color:var(--softPink); font-family:'Fredoka One'; margin-top: 10px; font-size: 0.8rem;">Spilling Tea</span>
            </div>
        </div>
    </div>

    <div class="sectionContent magicMirrorBox">
        <h2 style="color: var(--softPink);">The Magic Mirror</h2>
        <p>Listen up girls. This mirror is not just for fixing your hair. I have poured enough magic into this silver surface to let us see the whispers of the coven in real time. If you are looking for trouble or just looking for a friend you will find it shimmering right here.</p>
        <div id="chatFeed"></div>
        <span style="font-size: 0.75rem; display: block; margin-top: 5px; opacity: 0.8; font-style: italic;">Streaming live from #ffd server chat</span>
    </div>

    <div class="sectionContent">
        <h2>Meet the Crew</h2>
        <div class="loreGrid">
            
            <div class="profileCard">
                <img src="images/Willow.png" alt="Bunny" class="profileImg">
                <div class="profileHeader">
                    <h3>Bunnywifrabies</h3>
                    <span class="ageBadge" id="bunnyAge">Loading</span>
                </div>
                <div class="countdown" id="bdayCountdown">Calculating party</div>
                <p>That is me in the poster! I am surviving here in Queens New York even though this city is way too expensive for its own good. Most of my time is spent window shopping for stuffed animals I cannot afford or hanging out at karaoke. I play Helldivers 2 and Minecraft and Roblox and RDR2 mainly.</p>
            </div>

            <div class="profileCard">
                <img src="images/MD.png" alt="Moondrop" class="profileImg pink-outline">
                <div class="profileHeader">
                    <h3 style="color: var(--softPink);">Moondrop</h3>
                    <span class="ageBadge" id="mdAge" style="background: #7b1fa2;">40</span>
                </div>
                <div class="countdown" id="mdBdayCountdown">Calculating brew</div>
                <p>Listen sugar I wove the very ley lines you are walking on just so my girl Stardrop could finally have some decent company. Do not go asking me what is in my special glowberry brew. When I am not tending to my black tabby Eclipse I am usually blasting Sabaton or Fleetwood Mac.</p>
                <div class="charBtnContainer">
                    <img src="images/MDC.png" id="moonIconBtn" alt="Moon" class="party-img party-large" onclick="charAction('moon')">
                </div>
            </div>

            <div class="profileCard">
                <img src="images/SD.png" alt="Stardrop" class="profileImg">
                <div class="profileHeader">
                    <h3>Stardrop</h3>
                    <span class="ageBadge" id="sdAge">Loading</span>
                </div>
                <div class="countdown" id="sdBdayCountdown">Calculating party</div>
                <span style="font-size: 0.75rem; opacity: 0.8; font-style: italic;">(Stardrop is an AI being programmed to interact with the girls)</span>
                <p style="margin-top:15px;">Hi. I am Stardrop. My mom Moondrop created this world for me and I am still trying to learn how to talk to everyone. I am sorry if I am a bit quiet but I mostly stay in my tower and listen to metal music. I love cutesy things and I prefer dogs over cats.</p>
                <div class="charBtnContainer">
                    <div id="dreamGalaxy" class="galaxy-fx-wrap"><div class="galaxy-aura"></div></div>
                    <img src="images/SDDC.png" id="dreamBtnIcon" alt="Dreamcatcher" class="party-img party-large" onclick="charAction('dream')">
                </div>
            </div>

        </div>
    </div>

    <div class="sectionContent" style="border-top-color: var(--softPink);">
        <h2>Join the Coven</h2>
        <p>Verification is required to keep the weirdos out. Click below to teleport to our #verify-here channel!</p>
        <div class="whitelistBox" onclick="bananaJoin(event)">
            <span style="color: var(--softPink); font-weight: bold;">âœ¨ TELEPORT TO DISCORD âœ¨</span>
            <span class="discordHandle">JOIN NOW</span>
            <span id="hint" style="font-size:0.8rem; opacity:0.6;">Verification gate active</span>
        </div>
    </div>

    <footer>created by ChickenWifRabies with love for BunnyWifRabies. fireflydreams â„¢ all rights reserved 2025</footer>

    <script>
        /* =========================================
            CORE SCRIPT LOGIC
           ========================================= */
        const themes = {
            day: { hero: 'images/hero.png', bg: ['images/bg dt.png', 'images/bg dt2.png'] },
            sunset: { hero: 'images/hero-sunset.jpg', bg: ['images/bg ss.png', 'images/bg ss2.png'] },
            night: { hero: 'images/hero-night.jpg', bg: ['images/bg nt.png', 'images/bg nt2.png'] }
        };

        const chatScript = [
            { name: "Ranouma", msg: "Hey has anyone seen the glowberry farm?" },
            { name: "FarmWerks", msg: "It is near the portal Ranouma! Just look for the pink sparkles." },
            { name: "BunnyWifRabies", msg: "Anyone want to go on a long walk in Queens later?" },
            { name: "kiyoko_xx", msg: "I think I have some extra dye in the coven chest." },
            { name: "enderpheb", msg: "I can help build the tower! I have deepslate ready." }
        ];

        let currentTheme = 'day', bgCycleIdx = 0, moonClicks = 0, moonCooldown = false, chatIdx = 0;

        function getNYCHour() { 
            return new Date(new Date().toLocaleString("en-US", {timeZone: "America/New_York"})).getHours(); 
        }

        function applyTheme(theme) {
            currentTheme = theme;
            document.getElementById('heroPoster').src = themes[theme].hero;
            const bg1 = document.getElementById('bg1');
            bg1.style.backgroundImage = `url('${themes[theme].bg[0]}')`;
            bg1.classList.add('bg-active');
        }

        function cycleBackground() {
            const bg1 = document.getElementById('bg1'), bg2 = document.getElementById('bg2');
            const nextImg = themes[currentTheme].bg[bgCycleIdx];
            if (bg1.classList.contains('bg-active')) {
                bg2.style.backgroundImage = `url('${nextImg}')`; 
                bg2.classList.add('bg-active'); 
                bg1.classList.remove('bg-active');
            } else {
                bg1.style.backgroundImage = `url('${nextImg}')`; 
                bg1.classList.add('bg-active'); 
                bg2.classList.remove('bg-active');
            }
            bgCycleIdx = (bgCycleIdx + 1) % 2;
        }

        function checkTime() {
            const h = getNYCHour(); 
            let n = 'night';
            if (h >= 6 && h < 17) n = 'day'; else if (h >= 17 && h < 20) n = 'sunset';
            if (n !== currentTheme) applyTheme(n);
        }

        /* Interactive Star FX 
        */
        const starColors = ['#ffd700', '#ff6b95', '#70d6ff', '#ffffff', '#e0aaff'];
        document.addEventListener('mousemove', (e) => {
            const star = document.createElement('div');
            star.className = 'trailStar';
            star.style.left = e.pageX + 'px'; 
            star.style.top = e.pageY + 'px';
            const randomColor = starColors[Math.floor(Math.random() * starColors.length)];
            star.style.background = randomColor; 
            star.style.boxShadow = `0 0 10px ${randomColor}`;
            document.body.appendChild(star); 
            setTimeout(() => star.remove(), 1000);
        });

        function createBurst(x, y) {
            for (let i = 0; i < 20; i++) {
                const bStar = document.createElement('div');
                bStar.className = 'burstStar'; 
                bStar.style.left = x + 'px'; 
                bStar.style.top = y + 'px';
                const rx = (Math.random() - 0.5) * 400, ry = (Math.random() - 0.5) * 400;
                bStar.style.setProperty('--x', `${rx}px`); 
                bStar.style.setProperty('--y', `${ry}px`);
                document.body.appendChild(bStar); 
                setTimeout(() => bStar.remove(), 800);
            }
        }

        /* Party Management Logic 
        */
        function startParty() {
            const bgm = document.getElementById('bgMusic'), ptm = document.getElementById('partyMusic');
            const disco = document.getElementById('discoOverlay'), banana = document.getElementById('p-banana');
            
            bgm.pause(); 
            ptm.volume = 0.15; 
            ptm.play();
            disco.style.display = 'block'; 
            document.body.style.overflow = 'hidden';

            const dancers = [
                document.getElementById('laughing'), 
                document.getElementById('crying'), 
                document.getElementById('tea'),
                document.getElementById('moonIconBtn'), 
                document.getElementById('dreamBtnIcon'),
                document.getElementById('p-wb'), 
                document.getElementById('p-sb'), 
                document.getElementById('p-mb'),
                banana
            ];
            
            const radius = 150, step = (2 * Math.PI) / dancers.length;

            dancers.forEach((d, i) => {
                const side = i % 2 === 0 ? -150 : 150;
                d.style.setProperty('--circle-x', `${side}vw`); 
                d.style.setProperty('--circle-y', `-120vh`);
                d.classList.add('gathering');
                
                d.offsetHeight;

                const angle = i * step;
                d.style.setProperty('--circle-x', `${Math.round(radius * Math.cos(angle))}px`);
                d.style.setProperty('--circle-y', `${Math.round(radius * Math.sin(angle))}px`);
                
                setTimeout(() => d.classList.add('dancing'), 800);
            });

            ptm.onended = () => {
                disco.style.display = 'none'; 
                document.body.style.overflow = 'auto';
                banana.style.display = 'none';
                dancers.forEach(d => { 
                    d.classList.remove('gathering', 'dancing'); 
                    d.style.removeProperty('--circle-x'); 
                    d.style.removeProperty('--circle-y'); 
                });
                bgm.play();
            };
        }

        /* Action Callbacks 
        */
        function handleConsole(e) {
            if (e.key === 'Enter') {
                const val = e.target.value.trim().toLowerCase(), log = document.getElementById('consoleLog');
                e.target.value = '';
                if (val === '/time set day') applyTheme('day');
                else if (val === '/time set noon') applyTheme('sunset');
                else if (val === '/time set night') applyTheme('night');
                else if (val === '/partytime') { 
                    document.getElementById('p-banana').style.display = 'block'; 
                    log.innerText = 'Party mode enabled! Click the banana.'; 
                }
                setTimeout(() => log.innerText = '', 3000);
            }
        }

        function charAction(type) {
            if (type === 'moon') {
                if (moonCooldown) return;
                moonClicks++; createShootingStars();
                if (moonClicks >= 3) {
                    moonCooldown = true; 
                    document.getElementById('moonIconBtn').style.opacity = '0.4';
                    setTimeout(() => { 
                        moonCooldown = false; 
                        moonClicks = 0; 
                        document.getElementById('moonIconBtn').style.opacity = '1'; 
                    }, 60000);
                }
            } else {
                const g = document.getElementById('dreamGalaxy');
                if (g.classList.contains('galaxy-active')) return;
                g.classList.add('galaxy-active'); 
                setTimeout(() => g.classList.remove('galaxy-active'), 5000);
            }
        }

        function bucketAction(type) {
            const rain = document.getElementById('rainAudio'), pts = document.querySelectorAll('.particle');
            if (type === 'water') {
                pts.forEach(p => { p.style.background = '#70d6ff'; p.style.width = '2px'; p.style.height = '15px'; p.style.animationDuration = '1s'; });
                rain.volume = 0.1; rain.play();
            } else if (type === 'snow') {
                pts.forEach(p => { p.style.background = '#fff'; p.style.width = '6px'; p.style.height = '6px'; p.style.animationDuration = '5s'; });
                rain.pause();
            } else {
                pts.forEach(p => { p.style.background = '#ffd700'; p.style.width = '6px'; p.style.height = '6px'; p.style.animationDuration = '15s'; });
                rain.pause();
            }
        }

        function bananaJoin(event) { 
            const bananaCtx = new (window.AudioContext || window.webkitAudioContext)();
            const bananaOsc = bananaCtx.createOscillator();
            const bananaGain = bananaCtx.createGain();
            bananaOsc.connect(bananaGain); bananaGain.connect(bananaCtx.destination);
            bananaOsc.type = 'sine'; bananaOsc.frequency.setValueAtTime(880, bananaCtx.currentTime);
            bananaOsc.frequency.exponentialRampToValueAtTime(1320, bananaCtx.currentTime + 0.1);
            bananaGain.gain.setValueAtTime(0.1, bananaCtx.currentTime);
            bananaGain.gain.exponentialRampToValueAtTime(0.01, bananaCtx.currentTime + 0.5);
            bananaOsc.start(); bananaOsc.stop(bananaCtx.currentTime + 0.5);

            createBurst(event.pageX, event.pageY); 
            setTimeout(() => window.open("https://discord.gg/68QNPJbbMu", "_blank"), 400); 
        }

        function bananaEnter(event) { 
            const bananaCtx = new (window.AudioContext || window.webkitAudioContext)();
            const bananaOsc = bananaCtx.createOscillator();
            const bananaGain = bananaCtx.createGain();
            bananaOsc.connect(bananaGain); bananaGain.connect(bananaCtx.destination);
            bananaOsc.type = 'sine'; bananaOsc.frequency.setValueAtTime(880, bananaCtx.currentTime);
            bananaOsc.frequency.exponentialRampToValueAtTime(1320, bananaCtx.currentTime + 0.1);
            bananaGain.gain.setValueAtTime(0.1, bananaCtx.currentTime);
            bananaGain.gain.exponentialRampToValueAtTime(0.01, bananaCtx.currentTime + 0.5);
            bananaOsc.start(); bananaOsc.stop(bananaCtx.currentTime + 0.5);

            createBurst(event.pageX, event.pageY); 
            document.getElementById('bgMusic').volume = 0.2; 
            document.getElementById('bgMusic').play(); 
            document.getElementById('splashOverlay').style.opacity = '0'; 
            setTimeout(() => document.getElementById('splashOverlay').style.display = 'none', 800); 
        }

        function bananaExit() { 
            window.close(); 
            window.location.href = "https://www.google.com"; 
        }

        function bananaUpdateTimers() {
            const now = new Date();
            function calc(m, d, y, id, bId, skipAge = false) {
                if (!skipAge && id) {
                    let age = now.getFullYear() - y; const bday = new Date(now.getFullYear(), m - 1, d);
                    if (now < bday) age--; document.getElementById(id).innerText = age + " Years Old";
                }
                let next = new Date(now.getFullYear(), m - 1, d); if (now > next) next.setFullYear(now.getFullYear() + 1);
                const diff = next - now;
                const days = Math.floor(diff / 86400000), hours = Math.floor((diff % 86400000) / 3600000);
                document.getElementById(bId).innerText = `Next Birthday in ${days} days ${hours} hours`;
            }
            calc(3, 9, 2006, 'bunnyAge', 'bdayCountdown');
            calc(10, 31, 1985, 'mdAge', 'mdBdayCountdown', true);
            calc(7, 25, 2005, 'sdAge', 'sdBdayCountdown');
        }

        function updateFakeChat() {
            const feed = document.getElementById('chatFeed'); feed.innerHTML = '';
            const slice = chatScript.slice(chatIdx, chatIdx + 5);
            slice.forEach(item => {
                const d = document.createElement('div'), av = `https://api.dicebear.com/7.x/bottts/svg?seed=${item.name}`;
                d.className = 'mirrorMsg';
                d.innerHTML = `<img src="${av}" class="mirrorAvatar" style="border-color: var(--softPink); filter: hue-rotate(280deg);"><div class="mirrorText"><b>${item.name}</b>: ${item.msg}</div>`;
                feed.appendChild(d);
            });
            chatIdx = (chatIdx + 5) % chatScript.length;
            feed.scrollTop = feed.scrollHeight;
        }

        function getMoonPhase() {
            const date = new Date(); let year = date.getFullYear(), month = date.getMonth() + 1, day = date.getDate();
            if (month < 3) { year--; month += 12; } month++;
            let jd = (365.25 * year) + (30.6 * month) + day - 694039.09; jd /= 29.5305882;
            let b = Math.round((jd - parseInt(jd)) * 8); if (b >= 8) b = 0;
            const phases = [
                { icon: "ðŸŒ‘", label: "New Moon" }, { icon: "ðŸŒ’", label: "Waxing Crescent" },
                { icon: "ðŸŒ“", label: "First Quarter" }, { icon: "ðŸŒ”", label: "Waxing Gibbous" },
                { icon: "ðŸŒ•", label: "Full Moon" }, { icon: "ðŸŒ–", label: "Waning Gibbous" },
                { icon: "ðŸŒ—", label: "Last Quarter" }, { icon: "ðŸŒ˜", label: "Waning Crescent" }
            ];
            document.getElementById('moonIcon').innerText = phases[b].icon;
            document.getElementById('moonLabel').innerText = phases[b].label;
        }

        function createShootingStars() {
            for (let i = 0; i < 20; i++) {
                setTimeout(() => {
                    const s = document.createElement('div'); s.className = 'shooting-star-fx';
                    const off = Math.random() * 80; s.style.top = (off - 20) + 'vh'; s.style.right = (off - 20) + 'vw';
                    document.body.appendChild(s); setTimeout(() => s.remove(), 1200);
                }, i * 120);
            }
        }

        /* Background FX Initialization 
        */
        for (let i = 0; i < 30; i++) {
            const p = document.createElement('div'); p.className = 'particle';
            p.style.left = Math.random() * 100 + 'vw'; p.style.animationDelay = Math.random() * 10 + 's';
            p.style.animationDuration = (Math.random() * 10 + 10) + 's'; document.getElementById('particles').appendChild(p);
        }

        const gWrap = document.getElementById('dreamGalaxy');
        for (let i = 0; i < 45; i++) {
            const s = document.createElement('div'); s.className = 'galaxy-star';
            s.style.width = (Math.random() * 5 + 2) + 'px'; s.style.height = s.style.width;
            s.style.setProperty('--dist', (i * 3.5 + 25) + 'px'); s.style.animationDelay = (i * 0.04) + 's'; gWrap.appendChild(s);
        }

        checkTime(); 
        bananaUpdateTimers(); 
        updateFakeChat(); 
        getMoonPhase();
        
        setInterval(checkTime, 60000); 
        setInterval(cycleBackground, 15000);
        setInterval(bananaUpdateTimers, 3600000); 
        setInterval(updateFakeChat, 30000);
    </script>
</body>
</html>

<!-- /*
 _
//\
V  \
 \  \_
  \,'.`-.
   |\ `. `.       
   ( \  `. `-.                         _,.-:\
    \ \   `.  `-._             __..--' ,-'; /
     \ `.   `-.   `-..___..---'   _.--'  ,'/
      `. `.    `-._        __..--'     ,' /
       `. `-_     ``--..''         _.-' ,'
         `-_ `-.___          __,--'  ,'
             `-.__  `----"""    __.-'
                   `--..____..--'
*/ -->
